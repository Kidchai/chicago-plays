DROP TABLE IF EXISTS genres_events;
DROP TABLE IF EXISTS genres;
DROP TABLE IF EXISTS events;

CREATE TABLE events
(
    id          INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title       VARCHAR,
    first_date  TIMESTAMP,
    last_date   TIMESTAMP,
    theatre     VARCHAR,
    genres      VARCHAR,
    description VARCHAR,
    event_url   VARCHAR,
    min_price   INTEGER,
    max_price   INTEGER,
    nextShow    TIMESTAMP
);

CREATE TABLE genres
(
    id    INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    genre VARCHAR UNIQUE
);

CREATE TABLE genres_events
(
    id       INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    genre_id INTEGER REFERENCES genres (id),
    event_id INTEGER REFERENCES events (id)
);