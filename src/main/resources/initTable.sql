DROP TABLE genres CASCADE;
DROP TABLE events CASCADE;
DROP TABLE IF EXISTS genres_events;

CREATE TABLE events
(
    event_id    INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title       VARCHAR,
    first_date  TIMESTAMP,
    last_date   TIMESTAMP,
    theatre     VARCHAR,
    description VARCHAR,
    event_url   VARCHAR,
    min_price   INTEGER,
    max_price   INTEGER,
    nextShow    TIMESTAMP
);

CREATE TABLE genres
(
    genre_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    genre    VARCHAR UNIQUE
);

CREATE TABLE genres_events
(
    genre_id INTEGER REFERENCES genres (genre_id),
    event_id INTEGER REFERENCES events (event_id),
    PRIMARY KEY (genre_id, event_id)
);